falta marcar as tarefas como realizadas...

ao efetuar a marcação, precisamos mudar a forma como as tarefas são apresentadas

uma tarefa realizada não pode conter nem o ícone de atualizar nem o de marcar como realizada

vamos efetuar uma requisição pro backend passando o id da tarefa afetada

uma vez atualizada a tarefa, bastará  reapresentar a página atualizada


1. em todas_tarefas.php vamos disparar a função marcarRealizada() com o onclick dentro do ícone <i> , 
passaremos o id da tarefa em questão através da tag de impressão php

<i class="fas fa-check-square fa-lg text-success" onclick="marcarRealizada(<?= $valor->id ?>)" ></i> 


2. Hora de implementar a função marcarRealizada() para redirecionar o usuário acrescentando a ação e o id à
url via GET (através da interrogação '?')

            function marcarRealizada(id){
				location.href = 'todas_tarefas.php?acao=marcarRealizada&id=' + id
			}

3. em tarefa_controller.php, usando como base na $acao 'marcarRealizada'
vamos fazer a conexão com o backend instanciando Tarefa, Conexao e TarefaService:

*repare aqui que recuperamos o id pra em seguida setar o id_status pra 2 (lembrando que 
'2' contém o string 'realizado')

            elseif ($acao == 'marcarRealizada') {
                $tarefa = new Tarefa;
                $tarefa->__set('id', $_GET['id'])->__set('id_status', 2 );

                $conexao = new Conexao();

                $tarefaService = new TarefaService($conexao, $tarefa);
                $tarefaService->marcarRealizada();



4. falta então criar o método marcarRealizada() lá em tarefa_service.php

* não confundir a function marcarRealizada() com o método marcarRealizada()
lembre-se que chamamos 'função' quando a função definida fora de objetos enquanto que 'método' é a função
disparada à partir de objetos
nesse caso a function está em JS enquanto que o método está em PHP
a primeira redireciona e customiza a url
o segundo prepara e executa o PDO contendo a instrução SQL

        public function marcarRealizada(id){
        $query = 'update tb_tarefas SET id_status = ? where id = ? '; 
        $stmt = $this->conexao->prepare($query);
        $stmt->bindValue( 1 , $this->tarefa->__get('id_status'));
        $stmt->bindValue( 2 , $this->tarefa->__get('id'));
        return $stmt->execute();
        header(location.href = 'todas_tarefas.php')


5. agora, melhorando a view, vamos exibir os ícones de atualizar e marcar tarefa como realizada, somente
se estas tarefas estiverem com status 'pendente'.

faremos isso envolvendo os ícones com blocos php contendo o if()

    <? if($valor->status == 'pendente') { ?>
    <i class="fas fa-edit fa-lg text-info" onclick="editar(<?= $valor->id ?>, '<?= $valor->tarefa ?>')"></i>
    <i class="fas fa-check-square fa-lg text-success" onclick="marcarRealizada(<?= $valor->id ?>)" ></i> 
    <? } ?>	

...e pronto! agora tarefas realizadas não exibem mais os dois ícones que não queremos